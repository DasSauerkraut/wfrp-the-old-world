{"name":"Flock of Doom","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Flock of Doom\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/spells/flock-of-doom.png","actorIds":[],"_id":"6rsFKubf3BT2ckVZ"}
{"_id":"A0VV4v8mRPmQrIcv","name":"Add XP","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let XP = 58; //Enter Wanted XP. \r\ngame.user.targets.forEach(target => {\r\n  console.log(target.actor.data.data.details.experience.total)\r\n   target.actor.update({\r\n      \"data.details.experience.total\": target.actor.data.data.details.experience.total + XP\r\n    })\r\n\r\n    let chatContent = `Adding ${XP} XP to ${target.data.name}. <hr> Total  XP:  \r\n     ${target.actor.data.data.details.experience.total} -> ${target.actor.data.data.details.experience.total + XP} | Current XP: ${target.actor.data.data.details.experience.current} -> ${target.actor.data.data.details.experience.current + XP}`;\r\nlet chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: chatContent\r\n    };\r\n    ChatMessage.create(chatData, {});  \r\nconsole.log(target.actor.data.data.details.experience.total + XP)\r\n  console.log(target.actor.data.data.details.experience.total)\r\n})\r\n\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/skills/skill.png","actorIds":[]}
{"name":"Sleep","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Sleep\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/blank.png","actorIds":[],"_id":"AEyjHGDRSM9Yu5qM"}
{"_id":"BN55fdNpL7d1hGGN","name":"Add Plate Armor","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let armorVal = 3; //Enter Wanted AP. \r\n//1 = Leather, 2 = Chain, 3 = Plate\r\n\r\nlet pack = game.packs.find(p => p.metadata.label == \"Trappings\")\r\nif (armorVal > 0 && armorVal < 4) {\r\n  let armorType = \"\";\r\n  let ignore = \"\";\r\n  switch (armorVal) {\r\n    case 1:\r\n      armorType = \"softLeather\";\r\n      ignore = \"Leather Jerkin\"\r\n      break;\r\n    case 2:\r\n      armorType = \"mail\";\r\n      ignore = \"Mail Shirt\"\r\n      break;\r\n    case 3:\r\n      armorType = \"plate\";\r\n      ignore = \"Open Plate Helm\"\r\n      break;\r\n  }\r\n\r\n  let addItem = async (target, armorList) => {\r\n    for (const armor of armorList) {\r\n      let junk = await target.actor.createOwnedItem(armor.data)\r\n      console.log(`Added ${armor.data.name}`)\r\n    }\r\n  }\r\n\r\n  pack.getContent().then(items => {\r\n    let armorList = items.filter(i => i.type == \"armour\" && i.data.data.armorType.value == armorType && i.data.name != ignore)\r\n    game.user.targets.forEach(target => {\r\n      console.log(target.actor)\r\n      addItem(target, armorList);\r\n    })\r\n  })\r\n}\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/armour/plate-helm.png","actorIds":[]}
{"name":"Flight","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Flight\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/blank.png","actorIds":[],"_id":"J7R5jGwn5LYKTGCq"}
{"_id":"JaPY7wVP1uEwsWEd","name":"Blessing of Battle","permission":{"qe38CidmAnjMDtHh":2,"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let enabled = false;\r\nlet chatContent = ''\r\n\r\nconsole.log(game.user.targets)\r\nlet disableMacro = (target) => {\r\nconsole.log(1)\r\n  if (target.actor.data.flags.bobMacro !== null && target.actor.data.flags.bobMacro !== undefined) {\r\n    chatContent = `Myrmidia's Blessing of Battle on ${target.data.name} has ended. <br> WS:  \r\n     ${target.actor.data.data.characteristics.ws.initial} -> ${target.actor.data.flags.bobMacro}`;\r\n    let obj = {}\r\n    obj['flags.bobMacro'] = null;\r\n    target.actor.update({\r\n      \"data.characteristics.ws.initial\": target.actor.data.data.characteristics.ws.initial - 10\r\n    })\r\n    target.actor.update(obj)\r\n    this.data.name = \"Blessing of Battle\"\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: chatContent\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  }\r\n}\r\n\r\ngame.user.targets.forEach(target => {\r\n  if (target.actor.data.flags.bobMacro !== null && target.actor.data.flags.bobMacro !== undefined) {\r\n    enabled = true;\r\n  }\r\n  if (!enabled) {\r\n    chatContent = `Casting Myrmidia's Blessing of Battle on ${target.data.name} <br> WS: \r\n    ${target.actor.data.data.characteristics.ws.initial} -> ${parseInt(target.actor.data.data.characteristics.ws.initial + 10)}`;\r\n    let obj = {}\r\n    obj['flags.bobMacro'] = target.actor.data.data.characteristics.ws.initial;\r\n    target.actor.update({\r\n      \"data.characteristics.ws.initial\": target.actor.data.data.characteristics.ws.initial + 10\r\n    })\r\n    target.actor.update(obj)\r\n    this.data.name = \"Blessing of Battle - A\"\r\n\r\n    game.Gametime.doIn(game.Gametime.DMf({\r\n      seconds: 36\r\n    }), disableMacro(target))\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: chatContent\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  } else {\r\n    disableMacro(target);\r\n  }\r\n})\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/prayers/blessings.png","actorIds":[]}
{"_id":"TY6emPbs1csLiNhP","name":"Add Chain Armor","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let armorVal = 2; //Enter Wanted AP. \r\n//1 = Leather, 2 = Chain, 3 = Plate\r\n\r\nlet pack = game.packs.find(p => p.metadata.label == \"Trappings\")\r\nif (armorVal > 0 && armorVal < 4) {\r\n  let armorType = \"\";\r\n  let ignore = \"\";\r\n  switch (armorVal) {\r\n    case 1:\r\n      armorType = \"softLeather\";\r\n      ignore = \"Leather Jerkin\"\r\n      break;\r\n    case 2:\r\n      armorType = \"mail\";\r\n      ignore = \"Mail Shirt\"\r\n      break;\r\n    case 3:\r\n      armorType = \"plate\";\r\n      ignore = \"Open Plate Helm\"\r\n      break;\r\n  }\r\n\r\n  let addItem = async (target, armorList) => {\r\n    for (const armor of armorList) {\r\n      let junk = await target.actor.createOwnedItem(armor.data)\r\n      console.log(`Added ${armor.data.name}`)\r\n    }\r\n  }\r\n\r\n  pack.getContent().then(items => {\r\n    let armorList = items.filter(i => i.type == \"armour\" && i.data.data.armorType.value == armorType && i.data.name != ignore)\r\n    game.user.targets.forEach(target => {\r\n      addItem(target, armorList);\r\n    })\r\n  })\r\n}\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/armour/mail-coif.png","actorIds":[]}
{"name":"Rapier","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Rapier\", \"weapon\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/weapons/rapier.png","actorIds":[],"_id":"WvKRInuqFLZ0NsSg"}
{"name":"Foil","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Foil\", \"weapon\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/weapons/foil.png","actorIds":[],"_id":"YMeGgpXpmYTqL4CS"}
{"name":"Drain","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Drain\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/blank.png","actorIds":[],"_id":"bIbXXNoaQ4fXciXz"}
{"_id":"fe9ypDwOl0NjymBR","name":"In range!","permission":{"default":2},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let enabled = false;\r\nif (actor.data.flags.atBayMacro !== null && actor.data.flags.atBayMacro !== undefined) {\r\n    enabled = true;\r\n  }\r\n  if (!enabled) {\r\nthis.data.name = \"Kept at Bay!\"\r\n  this.data.img = \"icons/svg/circle.svg\"\r\n  this.update({\"data.name\" : \"Kept at Bay!\"});\r\n    let obj = {}\r\n    obj['flags.atBayMacro'] = actor.data.data.characteristics.ws.initial;\r\n   actor.update({\r\n      \"data.characteristics.ws.initial\": actor.data.data.characteristics.ws.initial - 10\r\n    })\r\n   actor.update(obj)\r\n} else {\r\n  this.data.name = \"Same Length!\"\r\n  this.data.img = \"icons/svg/combat.svg\"\r\n  this.update({\"data.name\" : \"Same Length!\"});\r\nlet obj = {}\r\n    obj['flags.atBayMacro'] = null;\r\n   actor.update({\r\n      \"data.characteristics.ws.initial\": actor.data.data.characteristics.ws.initial + 10\r\n  })\r\n   actor.update(obj)\r\n}","author":"veFQbEXGSkKISuyJ","img":"icons/svg/circle.svg","actorIds":[]}
{"name":"Choking Shadows","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Choking Shadows\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/spells/choking-shadows.png","actorIds":[],"_id":"gVyefHhRAFPFjh7G"}
{"name":"Sling","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Sling\", \"weapon\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/weapons/sling.png","actorIds":[],"_id":"iC67jMGr0VoswExZ"}
{"name":"Bolt (Fire)","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Bolt (Fire)\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/spells/fire.png","actorIds":[],"_id":"iORur2y3c0dqCwon"}
{"_id":"jUrb8OWxk9C7dVY6","name":"Add Leather Armor","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let armorVal = 1; //Enter Wanted AP. \r\n//1 = Leather, 2 = Chain, 3 = Plate\r\n\r\nlet pack = game.packs.find(p => p.metadata.label == \"Trappings\")\r\nif (armorVal > 0 && armorVal < 4) {\r\n  let armorType = \"\";\r\n  let ignore = \"\";\r\n  switch (armorVal) {\r\n    case 1:\r\n      armorType = \"softLeather\";\r\n      ignore = \"Leather Jerkin\"\r\n      break;\r\n    case 2:\r\n      armorType = \"mail\";\r\n      ignore = \"Mail Shirt\"\r\n      break;\r\n    case 3:\r\n      armorType = \"plate\";\r\n      ignore = \"Open Plate Helm\"\r\n      break;\r\n  }\r\n\r\n  let addItem = async (target, armorList) => {\r\n    for (const armor of armorList) {\r\n      let junk = await target.actor.createOwnedItem(armor.data)\r\n      console.log(`Added ${armor.data.name}`)\r\n    }\r\n  }\r\n\r\n  pack.getContent().then(items => {\r\n    let armorList = items.filter(i => i.type == \"armour\" && i.data.data.armorType.value == armorType && i.data.name != ignore)\r\n    game.user.targets.forEach(target => {\r\n      addItem(target, armorList);\r\n    })\r\n  })\r\n}\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/equipment/armour/leather-skullcap.png","actorIds":[]}
{"name":"Regenerate","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Regenerate\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/spells/regenerate.png","actorIds":[],"_id":"oCeoUpVGXKPdVFR3"}
{"name":"Drain","permission":{"veFQbEXGSkKISuyJ":3},"type":"script","sort":100001,"flags":{},"scope":"global","command":"WFRP_Utility.rollItemMacro(\"Drain\", \"spell\");","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/blank.png","actorIds":[],"_id":"z6IjOgcvWfoYuowX"}
{"_id":"zY1BAzEz8pczERq9","name":"Blessing of Courage","permission":{"qe38CidmAnjMDtHh":2},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let enabled = false;\r\nlet chatContent = ''\r\n\r\nconsole.log(game.user.targets)\r\nlet disableMacro = (target) => {\r\n  if (target.actor.data.flags.bocMacro !== null && target.actor.data.flags.bocMacro !== undefined) {\r\n    chatContent = `Myrmidia's Blessing of Courage on ${target.data.name} has ended. <br> WP:  \r\n     ${target.actor.data.data.characteristics.wp.initial} -> ${target.actor.data.flags.bocMacro}`;\r\n    let obj = {}\r\n    obj['flags.bocMacro'] = null;\r\n    target.actor.update({\r\n      \"data.characteristics.wp.initial\": target.actor.data.flags.bocMacro\r\n    })\r\n    target.actor.update(obj)\r\n    this.data.name = \"Blessing of Courage\"\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: chatContent\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  }\r\n}\r\n\r\ngame.user.targets.forEach(target => {\r\n  if (target.actor.data.flags.bocMacro !== null && target.actor.data.flags.bocMacro !== undefined) {\r\n    enabled = true;\r\n  }\r\n  if (!enabled) {\r\n\r\n    chatContent = `Casting Myrmidia's Blessing of Courage on ${target.data.name} <br> WP: \r\n    ${target.actor.data.data.characteristics.wp.initial} -> ${parseInt(target.actor.data.data.characteristics.wp.initial + 10)}`;\r\n    let obj = {}\r\n    obj['flags.bocMacro'] = target.actor.data.data.characteristics.wp.initial;\r\n    target.actor.update({\r\n      \"data.characteristics.wp.initial\": target.actor.data.data.characteristics.wp.initial + 10\r\n    })\r\n    target.actor.update(obj)\r\n    this.data.name = \"Blessing of Courage - A\"\r\n\r\n    game.Gametime.doIn(game.Gametime.DMf({\r\n      seconds: 36\r\n    }), disableMacro(target))\r\n    let chatData = {\r\n      user: game.user._id,\r\n      speaker: ChatMessage.getSpeaker(),\r\n      content: chatContent\r\n    };\r\n    ChatMessage.create(chatData, {});\r\n  } else {\r\n    disableMacro(target);\r\n  }\r\n})\r\n","author":"veFQbEXGSkKISuyJ","img":"systems/wfrp4e/icons/prayers/blessings.png","actorIds":[]}
